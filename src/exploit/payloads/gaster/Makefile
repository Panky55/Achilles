.PHONY: payloads

CC ?= clang

payloads:
	mkdir obj
	as -arch arm64 src/payload_A9.S -o obj/payload_A9.o
	gobjcopy -O binary -j .text obj/payload_A9.o bins/payload_A9.bin
	as -arch arm64 src/payload_notA9.S -o obj/payload_notA9.o
	gobjcopy -O binary -j .text obj/payload_notA9.o bins/payload_notA9.bin
	as -arch arm64 src/payload_handle_checkm8_request.S -o obj/payload_handle_checkm8_request.o
	gobjcopy -O binary -j .text obj/payload_handle_checkm8_request.o bins/payload_handle_checkm8_request.bin
	$(RM) -r obj