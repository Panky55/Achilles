// Used for booting with verbose boot straight from DFU mode

// Taken from axi0mX's ipwndfu

.text

.pool
.set JUMP_BACK,   0x180018004
.set WRITE_ADDR,  0x180033538
.set WRITE_VALUE,  0x9100C484

.globl _main
_main:
  MSR DAIFSET, #0xF // move 0xF to DAIFSET - DAIFSET being the interrupt mask bits

  LDR X5, =WRITE_ADDR // load the address of WRITE_ADDR into X5
  LDR W6, =WRITE_VALUE // load the value of WRITE_VALUE into W6
  STR W6, [X5] // store the value of W6 into the address of X5

  LDR X5, =JUMP_BACK // load the address of JUMP_BACK into X5
  BR  X5 // branch to the address of X5