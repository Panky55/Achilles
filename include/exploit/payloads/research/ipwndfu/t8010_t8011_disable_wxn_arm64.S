// Disable WXN (write execute never) bit in SCTLR_EL1
// SCTLR_EL1 is the System Control Register for EL1
// https://developer.arm.com/documentation/den0024/a/ARMv8-Registers/System-registers - "Controls architectural features, for example the MMU, caches and alignment checking."

.text

.align 2

.globl _main
_main:
  MOV  X1, #0x180000000 // move load address into X1
  ADD  X2, X1, #0xA0000 // add offset to load address and store in X2
  ADD  X1, X1, #0x625 // add offset to load address and store in X1
  STR  X1, [X2,#0x600] // store X1 at X2 + 0x600
  DMB  SY

  MOV  X0, #0x100D // move 0x100D into X0
  MSR  SCTLR_EL1, X0 // move X0 into SCTLR_EL1
  DSB  SY
  ISB

  RET // return